3
(. -[ Counter/1; NonTermination/1 ]-> .,
  Value (@., non_rec, l, [ A ], [ (x, A) ], Some Type (list/1, Type (Z/1))) =
    Match
      ((?, Effect ([ Counter/1; NonTermination/1 ], .)),
        Variable ((?, Effect ([ ], .)), x/0),
        [
          (Any,
            Let (4, Effect ([ Counter/1; NonTermination/1 ], .))
              (@., rec, map_rec, [ A; B ],
                [
                  (counter, Type (nat/1));
                  (f, (B -> A));
                  (x_1, Type (list/1, B))
                ], Some Type (list/1, A)) =
              Match
                ((?, Effect ([ NonTermination/1 ], .)),
                  Variable
                    ((?, Effect ([ ], .)),
                      counter/0),
                  [
                    (Constructor (O/1),
                      Apply
                        ((?,
                          Effect
                            ([
                              NonTermination/1
                            ],
                              .)),
                          Variable
                            ((?,
                              Effect
                                ([
                                ],
                                  .
                                    -[
                                      NonTermination/1
                                    ]->
                                    .)),
                              not_terminated/1),
                          [
                            Tuple
                              ((?,
                                Effect
                                  ([
                                  ],
                                    .)))
                          ]));
                    (Constructor (S/1, counter),
                      Match
                        ((?,
                          Effect
                            ([
                              NonTermination/1
                            ],
                              .)),
                          Variable
                            ((?,
                              Effect
                                ([
                                ],
                                  .)),
                              x_1/0),
                          [
                            (Constructor
                              ([]/1),
                              Constructor
                                ((5,
                                  Effect
                                    ([
                                    ],
                                      .)),
                                  []/1));
                            (Constructor
                              (cons/1,
                                x,
                                xs),
                              Constructor
                                ((6,
                                  Effect
                                    ([
                                      NonTermination/1
                                    ],
                                      .)),
                                  cons/1,
                                  Apply
                                    ((6,
                                      Effect
                                        ([
                                        ],
                                          .)),
                                      Variable
                                        ((6,
                                          Effect
                                            ([
                                            ],
                                              .)),
                                          f/0),
                                      [
                                        Variable
                                          ((6,
                                            Effect
                                              ([
                                              ],
                                                .)),
                                            x/0)
                                      ]),
                                  Apply
                                    ((6,
                                      Effect
                                        ([
                                          NonTermination/1
                                        ],
                                          .)),
                                      Apply
                                        ((?,
                                          Effect
                                            ([
                                            ],
                                              .
                                                ->
                                                .
                                                  -[
                                                    NonTermination/1
                                                  ]->
                                                  .)),
                                          Variable
                                            ((?,
                                              Effect
                                                ([
                                                ],
                                                  .
                                                    ->
                                                    .
                                                      ->
                                                      .
                                                        -[
                                                          NonTermination/1
                                                        ]->
                                                        .)),
                                              map_rec/0),
                                          [
                                            Variable
                                              ((?,
                                                Effect
                                                  ([
                                                  ],
                                                    .)),
                                                counter/0)
                                          ]),
                                      [
                                        Variable
                                          ((6,
                                            Effect
                                              ([
                                              ],
                                                .)),
                                            f/0);
                                        Variable
                                          ((6,
                                            Effect
                                              ([
                                              ],
                                                .)),
                                            xs/0)
                                      ])))
                          ]))
                  ]) in
            Let (4, Effect ([ Counter/1; NonTermination/1 ], .))
              (@., non_rec, map, [ A; B ],
                [ (f, (B -> A)); (x_1, Type (list/1, B)) ],
                Some Type (list/1, A)) =
              Apply
                ((?,
                  Effect
                    ([
                      Counter/1;
                      NonTermination/1
                    ], .)),
                  Variable
                    ((?,
                      Effect
                        ([ ],
                          . ->
                            .
                              ->
                              .
                                -[
                                  NonTermination/1
                                ]->
                                .)),
                      map_rec/0),
                  [
                    Apply
                      ((?,
                        Effect
                          ([
                            Counter/1
                          ],
                            .)),
                        Variable
                          ((?,
                            Effect
                              ([
                              ],
                                .
                                  -[
                                    Counter/1
                                  ]->
                                  .)),
                            read_counter/1),
                        [
                          Tuple
                            ((?,
                              Effect
                                ([
                                ],
                                  .)))
                        ]);
                    Variable
                      ((?,
                        Effect
                          ([
                          ],
                            .)),
                        f/0);
                    Variable
                      ((?,
                        Effect
                          ([
                          ],
                            .)),
                        x_1/0)
                  ]) in
            Let (7, Effect ([ Counter/1; NonTermination/1 ], .))
              (@., rec, loop_rec, [ A ],
                [ (counter, Type (nat/1)); (x, A) ], Some A) =
              Match
                ((?, Effect ([ NonTermination/1 ], .)),
                  Variable
                    ((?, Effect ([ ], .)),
                      counter/0),
                  [
                    (Constructor (O/1),
                      Apply
                        ((?,
                          Effect
                            ([
                              NonTermination/1
                            ],
                              .)),
                          Variable
                            ((?,
                              Effect
                                ([
                                ],
                                  .
                                    -[
                                      NonTermination/1
                                    ]->
                                    .)),
                              not_terminated/1),
                          [
                            Tuple
                              ((?,
                                Effect
                                  ([
                                  ],
                                    .)))
                          ]));
                    (Constructor (S/1, counter),
                      Variable
                        ((7,
                          Effect
                            ([
                            ],
                              .)),
                          x/0))
                  ]) in
            Let (7, Effect ([ Counter/1; NonTermination/1 ], .))
              (@., non_rec, loop, [ A ], [ (x, A) ], Some A) =
              Apply
                ((?,
                  Effect
                    ([
                      Counter/1;
                      NonTermination/1
                    ], .)),
                  Variable
                    ((?,
                      Effect
                        ([ ],
                          . ->
                            .
                              -[
                                NonTermination/1
                              ]->
                              .)),
                      loop_rec/0),
                  [
                    Apply
                      ((?,
                        Effect
                          ([
                            Counter/1
                          ],
                            .)),
                        Variable
                          ((?,
                            Effect
                              ([
                              ],
                                .
                                  -[
                                    Counter/1
                                  ]->
                                  .)),
                            read_counter/1),
                        [
                          Tuple
                            ((?,
                              Effect
                                ([
                                ],
                                  .)))
                        ]);
                    Variable
                      ((?,
                        Effect
                          ([
                          ],
                            .)),
                        x/0)
                  ]) in
            Apply
              ((8, Effect ([ Counter/1; NonTermination/1 ], .)),
                Variable
                  ((8,
                    Effect
                      ([ ],
                        . ->
                          .
                            -[
                              Counter/1;
                              NonTermination/1
                            ]->
                            .)),
                    map/0),
                [
                  Function
                    ((8,
                      Effect
                        ([
                        ],
                          .
                            ->
                            .)),
                      n,
                      Apply
                        ((8,
                          Effect
                            ([
                            ],
                              .)),
                          Variable
                            ((8,
                              Effect
                                ([
                                ],
                                  .)),
                              Z.add/0),
                          [
                            Variable
                              ((8,
                                Effect
                                  ([
                                  ],
                                    .)),
                                n/0);
                            Constant
                              ((8,
                                Effect
                                  ([
                                  ],
                                    .)),
                                Int(1))
                          ]));
                  Constructor
                    ((8,
                      Effect
                        ([
                        ],
                          .)),
                      cons/1,
                      Constant
                        ((8,
                          Effect
                            ([
                            ],
                              .)),
                          Int(5)),
                      Constructor
                        ((8,
                          Effect
                            ([
                            ],
                              .)),
                          cons/1,
                          Constant
                            ((8,
                              Effect
                                ([
                                ],
                                  .)),
                              Int(7)),
                          Constructor
                            ((8,
                              Effect
                                ([
                                ],
                                  .)),
                              cons/1,
                              Constant
                                ((8,
                                  Effect
                                    ([
                                    ],
                                      .)),
                                  Int(8)),
                              Constructor
                                ((8,
                                  Effect
                                    ([
                                    ],
                                      .)),
                                  []/1))))
                ]))
        ]))
